<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[글감 저장소 RSS Feed]]></title><description><![CDATA[개발 글 저장소]]></description><link>https://gatsbystarterblogsource.gatsbyjs.io</link><generator>GatsbyJS</generator><lastBuildDate>Mon, 13 Jun 2022 04:41:56 GMT</lastBuildDate><item><title><![CDATA[[UIKit] clipToBounds vs. maskToBounds]]></title><description><![CDATA[clipToBounds vs. maskToBounds 위의 두 코드는 View의 cornerRadius 를 적용하고 하위 View…]]></description><link>https://gatsbystarterblogsource.gatsbyjs.io/clipToBounds-maskToBounds/</link><guid isPermaLink="false">https://gatsbystarterblogsource.gatsbyjs.io/clipToBounds-maskToBounds/</guid><pubDate>Sat, 28 May 2022 18:51:00 GMT</pubDate><content:encoded>&lt;h3&gt;clipToBounds vs. maskToBounds&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;view&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clipToBounds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// UIView&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// or&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;view&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;layer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;maskToBounds &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// CALayer&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;위의 두 코드는 View의 cornerRadius 를 적용하고 하위 View 에도 동일하게 적용시킬 때 사용되곤한다.
실제도 두 코드 중 어느 것을 선택하더라도 모두 동일한 결과를 얻게 된다.&lt;/p&gt;
&lt;p&gt;동일한 동작을 한다면 &lt;code class=&quot;language-text&quot;&gt;clipToBounds&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;maskToBounds&lt;/code&gt; 의 차이는 무엇이고 왜 두 가지 방법을 모두 제공할까?&lt;/p&gt;
&lt;h3&gt;clipToBounds == maskToBounds&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/1177775/how-is-the-relation-between-uiviews-clipstobounds-and-calayers-maskstobounds/1177978#1177978&quot;&gt;이 글&lt;/a&gt;에 따르면 어셈블리 코드 레벨에서 &lt;code class=&quot;language-text&quot;&gt;clipToBounds&lt;/code&gt; 의 호출 흐름을 따라가보면 &lt;code class=&quot;language-text&quot;&gt;maskToBounds&lt;/code&gt; 호출한다는 것을 보여준다. 결국 &lt;code class=&quot;language-text&quot;&gt;clipToBounds&lt;/code&gt; 와 &lt;code class=&quot;language-text&quot;&gt;maskToBounds&lt;/code&gt; 의 차이는 기능적으로 동일하지만 맥락에 따른 용어적인 차이라고 저자는 말한다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;clipToBounds&lt;/code&gt; 는 UIView 클래스의 인스턴스 속성이고 &lt;code class=&quot;language-text&quot;&gt;maskToBounds&lt;/code&gt; 는 CALayer 의 인스턴스 속성이다. 그리고 &lt;code class=&quot;language-text&quot;&gt;clipToBounds&lt;/code&gt; 가 내부적으로 &lt;code class=&quot;language-text&quot;&gt;maskToBounds&lt;/code&gt; 를 호출한다면 UIView 와 CALayer 는 어떤 협력 관계일까?&lt;/p&gt;
&lt;h3&gt;UIView &amp;#x26; CALayer&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/documentation/uikit/uiview&quot;&gt;애플 문서&lt;/a&gt;에 따르면 UIView 는 크게 다음의 3 가지 역할을 하는 객체라고 설명한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;애니메이션과 화면 그리기&lt;/li&gt;
&lt;li&gt;레이아웃과 하위 View 관리&lt;/li&gt;
&lt;li&gt;탭, 드래그 등의 인터렉션 처리&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;UIView 와 CALayer 의 관계는 1번 역할과 관련이 있다. UIView 에는 화면을 그리는 동작과 관련된 여러 메소드를 제공하고 있다. 개발자가 직접 override 를 통해 이 동작은 커스텀할 수도 있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;이 때문에 UIView 와 CALayer 는 각자 UI 요소를 그리는 개별 메커니즘을 가지고 있고 View 와 Layer 라는 요소가 화면에 함께 그려지는 것이라고 생각했었다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;그러나 실제로 View 컨텐츠를 그리는 동작은 CALayer 를 통해서 이루어진다. UIView 는 CALayer 가 컨텐츠를 그리는대 필요한 것을 제공해주는 역할하는 Wrapper/Container 이다.&lt;/p&gt;
&lt;p&gt;(물론 더 깊이 들어가면, CALayer 또한 Wrapper 역할을 하고 Core Graphics, Open GL 이 실제로 그래픽 하드웨어를 컨트롤해 컨텐츠를 그린다고 한다.)&lt;/p&gt;
&lt;p&gt;그렇다면 애플은 어째서 UIView 자체적으로 컨텐츠를 그리도록 구현하지 않고 CALayer 와 협력하게 만든 것일까?&lt;/p&gt;
&lt;h3&gt;UI Framework&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 498px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/30effb75a3f438ee30fcdaf15e014edd/79e1b/pnokio.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 126.58227848101265%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAF7klEQVQ4y13QaVCSeQCA8X9u7Tazu83WVGublW4C4oFchkep6Ki1YamZgVcpgoiamRdWtm5l5a29CIjmgWimIoKoEHikeaPgRXlUVmvlNJWtdk727jT7YXd25vfp+fiAYiL4H+EeI64VkMT5Tyjrm5NpEHEdDwOEdqCYALjWALJdU4AGQsLXAkpIRv8ltF8rwIByb/Tyysq7928/fvr05uUL1ZW4ImsgIIIWFqnCz6n8qCPfZSsP/w2ALP91zRLwMUa5CKDJT15+80pdxNFqZDAMN6fHZJsAofv21tSwmmhae3bMZfyufCQAdVTkP25SkQ00ZKmXKcQV0KMYdyVZ821FQ7VZcpkUYgTU+JpcwpndPEFpTNhfcdSi2M24xscUwJMx8Hg0PM6GDac+dQfcboJatYZQrNV01dkRVWVfA6Ts6VXPPVN2y8RC3pC8dEYVtzrOnC6nvGwOAB97w+DRyNUhBjwaPiUOaenVDkCnZQnHNQ2CWdGVG1fOy7WGnvlXrWPzUv28ovfOgjr84xBjvvrQU/FBcK/Q5fMwE9azltRUmaRySClWxPsb6nLqBiaGJ3U+AQGOLmTV8EjLxELj4PT93oz33YEr/ZGLUv9H5V5gQUyZE3rC+vBBTZFM/7CSGWgojJGnhV+js2ovZzmZowAA+roQbUf+lDoVHqEv3Q5f6glf6QiZgVwBPBb1sNRrBnJq0bRKxxYMMkHZBRYNhSxD7Cw1NyFv+hEAUPK7K6w9vtwdDI+xl3rpy/0RrxUBw+fwAB6JXB1ljaZhhkUszYCmtpq7C43iRrrwMZYiAsZl6yYAQIY3dnU8drmH/q4jeLqSos10msp20mfYA3g08i914BzffTrf8UMX9XlXsANic5GbDWSFLLRGUYy3RO7aLsRb9l8l3+O7T+Xta4u1nhF6wKOR0xAZPBB66DPsn97wfqsJulfgpol2K7RBFaAQkA0qyxJxzQZVgkGXYNGGYu8XUj9DnvNdse/n0Sh4jH1f4A4WG3wMefueVlN0BeR9ZltCN20tx6D5thZcG5QAY8HDWJzZbXrY5GdVtocu13lJE7RwK+jL0Al4jP1E9BuYhsgv5EfhzuAUPyQAYOOG9XmOKAEaVWiBKLZG8qxQlB3bjL5bT7beOlx7pDPZpbeQ8Vr3B6xjLDb4Am068S5EflVLqTq3DwBgZLSmim3dFmZX7GrLd8LFWJggNm8cr89Rcs+m0Gxu8FJm557M38mCJxivFMfAiiZoVcuE78U+7wg97HvwSMQpfSNjodxtofGQXsnt002FUQ/Ny7JWunjcKFK3PP+Zoe7zIG2pj7nSGfL19pdh5ucBBjwU+kgv6Hr0YXEkfVnpP5hsZRAdfzDalJvCTj/DVjeVqnlROv4xdTyp1AMP0e3e3A4FsJYJa5lfJqJgA3ulL1jZ39nfIZgttH9cSXlc4jIpY+jKA6ncfLSofUQSMicLqvYl5e9GZPpgRXHOANYyYD2r78KBtmhyW9JeRdrhnIATPelkeDJ6lu/Wz6UqBxRNLI8MR6cb9gTtxYjiAw4tNNyDujh5Oh3AupN/KkKvWprnbjPLNzWHCOY5mB3VEfj6U8TGJLsq9h7RRSZEws6BnybBLyofG/Fph5DCrEBps6H3GujIC9bk0MVMHN/b6rqvlSSWIEmwk8cT5PEEnrsV1xZZhNkpJCC1xr82B2GaOcQ2jgO1rgkbk8n1IAFVBk15idZ6/kDzRb+2Sz6qJKImCSeLJ9TH4rl70QW2FpmWu8Usz2EBXZ6I7eTYtafumVSlaaVpszWJQH6B2pjqqYjHt3BcFSlkEYt4PcH7ZgyhnWPXkkisicbn7UFUeDpKww/LmNhbZ+zLwm24gZYVCfuLOP6A7/xD2TEzRRxOfhpffxLXlOggSyW3JpOUKaRbHFL7OXtJBP76futSL3R9FL6Z4ypJo0ouM6sjvc6i14JiHODjAJ+0juey4fpB41qqaU2QWWUwsolh0cJCSxloCRN9MwxRFWhaSjEWOH9fQdlVH4QVkr4ttwN/A+Fx7KQpeDmzAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;pnokio&quot;
        title=&quot;pnokio&quot;
        src=&quot;/static/30effb75a3f438ee30fcdaf15e014edd/79e1b/pnokio.png&quot;
        srcset=&quot;/static/30effb75a3f438ee30fcdaf15e014edd/c26ae/pnokio.png 158w,
/static/30effb75a3f438ee30fcdaf15e014edd/6bdcf/pnokio.png 315w,
/static/30effb75a3f438ee30fcdaf15e014edd/79e1b/pnokio.png 498w&quot;
        sizes=&quot;(max-width: 498px) 100vw, 498px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;고전 동화 피노키오에 나오는 제페토 할아버지를 떠올려보자.&lt;/p&gt;
&lt;p&gt;화가 인형을 만든 제페토 할아버지는 이 인형으로 인형극을 하고 싶었다. 그런대 인형을 직접 손에 쥐고 움직이는 일이 불편하고 조작하기 쉽지 않다고 느꼈다. 그래서 인형의 양 팔에 실을 매달아 손을 쉽게 움직일 수 있게 만들었다.&lt;/p&gt;
&lt;p&gt;이전 보다 조작하기 쉬워졌지만 더 복잡한 움직임을 위해 실을 추가로 매달자 여러 실을 조작하는 일도 불편하게만 느껴졌다. 그래서 할아버지는 실들을 나무에 매달아 조작하는 컨트롤러를 만들었다. 이 조차 금방 불편함을 느낀 할아버지는 인형에 생명을 불어 넣어 스스로 움직이는 피노키오를 만들어냈다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6fe779ae3f51f674d7b06943c3c8ebb5/2e367/calayer-intro.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.92405063291139%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAADV0lEQVQ4y12RW28bVRDHz6fgiRcIvMILLwihUhJAacpNLU1oc3GUi50CaUXaIrAqoFQBHkCEQhVR0m5KHd92N7YTt76U0jRXOb5m7XPmrNd7iR8QXwDU9UqDvK5CxcNPc+Y/8x+dM4cwxggDOKLQ6nSFKt4KVXyPk1OKvrXytm+zkvMVaxXf3v/qZap4q6x2BgB6OHBC5nckslsrbXiys3ho5Sy+njyPryXPHXA88zl6177DkXtf49E7n2LP6sxBzxvJC/hS4iOcuf8TGryR/LO+T8gX67+S7WphrXv1HD4ZPYnPSCPYJXZ4WhzG7tQFPLX2DR67dwmfj3vxKXEIux71PCt58InwCTyVuYwmb6z8pTUJeaDsEIVWL4aL8dRCPiDeyIfk6/mgvFgIyUIhKAuFkPxL7qa8kA88pgUPatd2b4kr5TsZjddnLFUnRKmphDGYDa4bW1eyVnr+dyvb5vuUkf0xY2Z/vmtm5zIdfkh3tDZzaTN79a6ZvZK1UqENfYcB81PGCFnNAanUYP29AMeuOY4vXqvjW0sGDkQtPBow8M2AgYPSPh4Pmy5D8j6+vWTgO0EDX5hXXc/JIEfKYFWhQMh6GUiVQmomxrFP4A/7A6rjlRvOmYThjIsNZySsOR/GdGdqWXem47pzNmE4Prnh9vQvqc4RQX34SYIjYxChDAi5X2REoSx9MamiJ6K1JsU6eiIqesIqjkbqOBat42hExf6AipeSgB/HOA6GOtqEWMeRsNZqexXKxILCCIlsUlKqsvRgSMPuRavV+5uJh67rePiGgd1C+8mWG5+72sApkeNAUMNXBBNfFQzsu2XiYcFsDUc0LFWZ+KDECMkrQCiD9GyK42SUt06LHCcjgL4o4JQI7vkDiWNb/zIJeD4GOB7u6G3Gwrz1bdrdoVhr7/D2LpA9CrffX+LYI+j/TMT27WHJsidiTXsq0bRPhEy796ZuD4qWPRZrutEXb9pDomVPxpv2ywuNv4dD7g7D7qf8UQSiUNg+LXHsW9RwXNLRu2zghGzgqKijJ6rjsYCGA8EG+pYNNx+TDBx30bF3UcNp2R2Ycm8IjBEAGNij8FVeYZ9tlah/s0T9W4/YLlN/XmH+XIX5N4o1N98s/Ufbo1C4DADvAgD5F03+1vRNwQBIAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;framework&quot;
        title=&quot;framework&quot;
        src=&quot;/static/6fe779ae3f51f674d7b06943c3c8ebb5/f058b/calayer-intro.png&quot;
        srcset=&quot;/static/6fe779ae3f51f674d7b06943c3c8ebb5/c26ae/calayer-intro.png 158w,
/static/6fe779ae3f51f674d7b06943c3c8ebb5/6bdcf/calayer-intro.png 315w,
/static/6fe779ae3f51f674d7b06943c3c8ebb5/f058b/calayer-intro.png 630w,
/static/6fe779ae3f51f674d7b06943c3c8ebb5/40601/calayer-intro.png 945w,
/static/6fe779ae3f51f674d7b06943c3c8ebb5/2e367/calayer-intro.png 1066w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;제페토 할아버지 이야기는 애플 framework 의 발전 과정과 비슷하다.&lt;/p&gt;
&lt;p&gt;직접 화면에 컨텐츠를 그리는 하드웨어(화가 인형)를 조작하기 위해서 Open GL, Core Graphics(인형에 매달린 실)가 만들어졌다. 저수준의 프래임워크를 통해 하드웨어를 직접 조작하기에 복잡한 화면을 구현할 수 있고 성능도 뛰어나다는 장점이 있다. 그러나 간단한 작업에도 작성해야할 코드량이 많다는 단점이 존재했다. 이를 보완하고 간편한 사용을 위해 Core Animation(나무 컨트롤러) 가 만들어졌고 이후에는 보다 개선된 UIKit(피노키오) 가 등장했다.&lt;/p&gt;
&lt;p&gt;이 이야기의 핵심은 다음과 같다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;사용이 어렵고 복잡한 저수준의 프래임워크를 기반으로 보다 &lt;ins&gt;&lt;strong&gt;&lt;em&gt;사용하기 쉬운&lt;/em&gt;&lt;/strong&gt;&lt;/ins&gt; 고수준 프래임워크를 만들어냈다는 점&lt;/li&gt;
&lt;li&gt;고수준의 프래임워크는 내부적으로는 &lt;ins&gt;&lt;strong&gt;&lt;em&gt;저수준 프래임워크에 의존&lt;/em&gt;&lt;/strong&gt;&lt;/ins&gt; 한다는 점&lt;/li&gt;
&lt;li&gt;고수준 프래임워크로 갈수록 &lt;ins&gt;&lt;strong&gt;&lt;em&gt;저수준 프래임워크에 대한 컨트롤이 제한&lt;/em&gt;&lt;/strong&gt;&lt;/ins&gt; 된다는 점&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;다시 UIView 와 CALayer 로 돌아오면, UIView 는 많은 코드량을 요구하지만 복잡한 UI 를 만들 수 있고 저수준의 좋은 성능을 누릴 수 있는 CALayer 를 내부적으로 사용한다. 동시에 CALayer 의 모든 기능을 제공할 수는 없기에 제한된 범위내에서 CALayer 의 기능을 개발자가 손 쉽게 사용하도록 메소드와 속성으로 제공한다.&lt;/p&gt;
&lt;h3&gt;내 생각&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;clipToBounds&lt;/code&gt; 가 별도로 제공되는 이유는 저수준 API 의 손 쉬운 사용과 View 를 다루는대 있어 중요한 개념인 frame 과 bounds 과 깊은 관련이 있기 때문이라고 추측해본다.&lt;/p&gt;
&lt;p&gt;또한 layer(&lt;code class=&quot;language-text&quot;&gt;self.view.layer&lt;/code&gt;) 속성을 제공해 저수준 API 를 사용에 대한 선택권을 주고 UIView 를 가지고도 복잡한 UI 를 그릴 수 있는 가능성을 열어준 거라고 생각한다.&lt;/p&gt;
&lt;p&gt;더욱이 CALayer 가 iOS의 UIKit 뿐만아니라 MacOS의 AppKit 적용되어있다는 사실을 알게 되었다. 공통된 기반 위에 각 OS 플랫폼에 맞는 Container framework 만 구현하면, 모든 플랫폼이 동일한 설계를 기반으로 만들어지기 때문에 유지보수하기 쉬워지고 기능이 업데이트되면 모든 플랫폼에서 사용할 수 있을 것 같다는 생각이 들었다. 애플 제품간 연동 기능도 이러한 설계 기반이 있기에 가능한 것이 아닐까? 라고 조심스럽게 추측해본다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 588px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cd7f29a7434de152f757bf396720120b/9bbaf/big-picture.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 87.34177215189874%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAACgElEQVQ4y4WT3ZLbIAyF8/5P1otedDo7TeIk/sfGGAcMGNubOKcjbbfttp2UGQ0WWB8cIe1SqbDPS5xFi4tokbYd+0lZoRquKJWGuBrI0UNax3PnPMRgkMkOeadQdD0KpXlvp0LEHAKC9xB1jdFaeOew3e9Y5pm/af18ShCnCVMIWJcF59MJnWzRCIGiKKA7ifpqsWtGj6sxuFqL0+WCvCjQtC18CBidQ681LmmKY5JguBr2wxSR5TnSPEdZ1aiE4JiSgDpMaO0IaUf0fsKxrJBLhWtcIEcHaUaWV6ie9+lfExeWmpQ1utFDufA2+4Ad/hjjOGJ/OCCE8HNt2zZkWYa6rtmnVBhj8K+xezweeDcalKPrMEBIidG/QdfXG1TfY14W+DBBG4PHO+G3eLK/gMv9jj5ENGbEl8MRn1++4SIafPryFV+TM45FiXow/OIk8b5tP7g/gL8OegPqKcL5gLZpoLoOh/0eTSOQpileXl5QVRX7uu9h5wVuXj7EfwQ+HhCjxzRNaJrmZ16oLAh4u93Yn+eZy2W9b/wgT4HKT4gx8gNYazEMA1vf99BawznHD9K2LVZKj5+eAPFA5wPWdUVdVSyPwFJKCCHYJyOfgK/3DUOIz29IOSQgyaRSKcuSgwlEa0mS4HQ68UG37QGq46c3bF1AjDPfwnvPMkmuUorB7/Jpn27Y/S+H0gXMMaJXinv2crmwfOrnPMtgjeHC1kphuVEOnwEBDFOEdh55VaNuGtRNy71Kc9spCNkhKyt0veZ6jevrcyAVqo0L9kWJpChxrgVb1koc8xKpaHEoKmSNhF/WD53yAfg7lIazlgubckitSDZozZKp6Edr/ooh4HfV6xNeoboGawAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;big-picture&quot;
        title=&quot;big-picture&quot;
        src=&quot;/static/cd7f29a7434de152f757bf396720120b/9bbaf/big-picture.png&quot;
        srcset=&quot;/static/cd7f29a7434de152f757bf396720120b/c26ae/big-picture.png 158w,
/static/cd7f29a7434de152f757bf396720120b/6bdcf/big-picture.png 315w,
/static/cd7f29a7434de152f757bf396720120b/9bbaf/big-picture.png 588w&quot;
        sizes=&quot;(max-width: 588px) 100vw, 588px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;참고자료&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/documentation/uikit/uiview&quot;&gt;UIView - Apple Official Document&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/20449256/how-does-clipstobounds-work/20449468#20449468&quot;&gt;How does clipsToBounds work?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/7826306/what-are-the-differences-between-a-uiview-and-a-calayer/7827488#7827488&quot;&gt;What are the differences between a UIView and a CALayer?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/1177775/how-is-the-relation-between-uiviews-clipstobounds-and-calayers-maskstobounds/1177978#1177978&quot;&gt;How is the relation between UIView’s clipsToBounds and CALayer’s masksToBounds?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/1447598/when-to-use-calayer-on-the-mac-iphone/1449201#1449201&quot;&gt;When to use CALayer on the Mac/iPhone?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://velog.io/@songtaehwan/iOS-Views-vs-Layers&quot;&gt;iOS) Views vs Layers&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[Xcode] Code Signing]]></title><description><![CDATA[처음으로 Xcode 에서 앱을 빌드하거나 배포를 위해 Archive 를 할 때 에 대해 고민하게 될 것이다.
 이 무엇이고 왜 필요한지 알아보자. 목차는 다음과 같다. Code Signing Signing Certificate Provisioning…]]></description><link>https://gatsbystarterblogsource.gatsbyjs.io/code-sigining/</link><guid isPermaLink="false">https://gatsbystarterblogsource.gatsbyjs.io/code-sigining/</guid><pubDate>Sat, 21 May 2022 18:51:00 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1d1e81254fe9170edc3ce71065bcfb7f/d7542/code-sigining.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 40.50632911392405%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABFUlEQVQoz2VRSY6EQAzjByBO7Fs3+47Y4YCQ+AH//0pGjlQI9RysJBR22SnJsiwCTNPkqus6hWFI0zRRVVXUti01TcN913Xco36/XzIMgwRfQHqLid51Xcrz/BGr65qKouAqEMcxeZ5HQRCQ7/vMYcG32FvUcRz6fD4MEDGDBGCGCM4gCMAx/mGHsI6oqIiDeJqmkaIopKoqybLM5Ou66DzPfziOg+775lQSRLIs42hlWXLMKIp4XpblQd/3/B3CqL/A3m3bJgl2IQIC3A3DwDdBEA8zzzON48g99pgkyRP9F7xDKL+XjbhpmrJbQLwsepxB9Hfn792zoIgEF3ADMnq4xQyXQnhdV563bWMe+n3f+TKs7w8l7uuxVKykYQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Xcode Code Sigining&quot;
        title=&quot;Xcode Code Sigining&quot;
        src=&quot;/static/1d1e81254fe9170edc3ce71065bcfb7f/f058b/code-sigining.png&quot;
        srcset=&quot;/static/1d1e81254fe9170edc3ce71065bcfb7f/c26ae/code-sigining.png 158w,
/static/1d1e81254fe9170edc3ce71065bcfb7f/6bdcf/code-sigining.png 315w,
/static/1d1e81254fe9170edc3ce71065bcfb7f/f058b/code-sigining.png 630w,
/static/1d1e81254fe9170edc3ce71065bcfb7f/d7542/code-sigining.png 810w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;처음으로 Xcode 에서 앱을 빌드하거나 배포를 위해 Archive 를 할 때 &lt;code class=&quot;language-text&quot;&gt;Code Signing&lt;/code&gt;에 대해 고민하게 될 것이다.
&lt;code class=&quot;language-text&quot;&gt;Code Signing&lt;/code&gt; 이 무엇이고 왜 필요한지 알아보자.&lt;/p&gt;
&lt;p&gt;목차는 다음과 같다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Code Signing&lt;/li&gt;
&lt;li&gt;Signing Certificate&lt;/li&gt;
&lt;li&gt;Provisioning Profile&lt;/li&gt;
&lt;li&gt;TL;DR&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Code Signing&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Code signing your app assures users that it’s from a known source and hasn’t been modified since it was last signed.
Before your app can integrate app services, be installed on a device, or be submitted to the App Store, it must be signed with a certificate issued by Apple.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;애플 문서에 따르면 사용자에게 앱이 서명된 이후로 변경되지 않았음을 증명하고 기기에 설치하거나 앱 스토어에 제출하기 전에 &lt;strong&gt;반드시&lt;/strong&gt; 애플로부터 발급받은 인증서와 함께 서명해야한다고 언급되어 있다.&lt;/p&gt;
&lt;p&gt;앱을 서명한다는 말이 무슨 뜻일까?&lt;/p&gt;
&lt;p&gt;계약서에 서명해본 적이 있다면 이해하기 쉬울 것이다. 예를 들어, 새 휴대폰을 할부로 구매한다고 가정해보자. 계약서를 작성 및 본인의 서명을 하고 휴대폰을 받음으로써 계약이 완료된다.
이때 계약서의 서명은 계약서에 제시된 조건과 내용을 인정하고 동의한다는 의미로 작성된다. 또한 계약이 완료된 시점으로부터 양측 계약 당사자 모두 &lt;strong&gt;법적으로 인정과 보호&lt;/strong&gt;를 받는다. 이렇게 작성된 계약서는 계약 당사자 한 쪽이 마음대로 &lt;strong&gt;내용을 바꾸더라도 법적으로 인정받지 못하고&lt;/strong&gt; 처벌을 받게 된다.&lt;/p&gt;
&lt;p&gt;여기서 기억해야할 것은 두 가지이다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;계약서&lt;/code&gt;에 서명 후 마음대로 수정할 수 없다.&lt;/li&gt;
&lt;li&gt;서명된 &lt;code class=&quot;language-text&quot;&gt;계약서&lt;/code&gt;은 &lt;code class=&quot;language-text&quot;&gt;법&lt;/code&gt;에 의해 인정받고 보호받는다.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Code Signing&lt;/code&gt; 도 계약서에 서명하는 것처럼 작성한 코드에 디지털 서명을 하는 것과 같다. 위에서 언급한 &lt;code class=&quot;language-text&quot;&gt;계약서&lt;/code&gt;는 &lt;code class=&quot;language-text&quot;&gt;앱&lt;/code&gt;으로, &lt;code class=&quot;language-text&quot;&gt;법&lt;/code&gt; 은 &lt;code class=&quot;language-text&quot;&gt;애플&lt;/code&gt;로 바뀌서 다시 읽어보자.
&lt;code class=&quot;language-text&quot;&gt;Code Signing&lt;/code&gt; 은 서명된 앱이 서명된 후로 변경되지 않았음을 애플로부터 증명받는 과정이다.&lt;/p&gt;
&lt;p&gt;만약 앱 서명 이후에 어떠한 방법으로든 앱이 변조되면 앱스토어의 심사를 통하지 못하거나, 디바이스에서 실행되지 않는다. apk 파일만 있으면 설치하고 실행하는 문제가 없는 안드로이드를 떠올려보자. 요즘 보이스 피싱은 특정 앱을 인터넷에서 다운받아 설치하도록 유도하도 해당 앱을 통해 돈을 훔친다고 한다. &lt;code class=&quot;language-text&quot;&gt;Code Signing&lt;/code&gt; 덕분에 애플 기기에 악의적인 목적을 가진 앱으로부터 안전할 수 있다.&lt;/p&gt;
&lt;p&gt;그렇다면 누가, 언제 앱 서명의 확인을 해야할 필요가 있는 걸까?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 538px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/53a00bad8a4ca703c24d68a92aa6f4fc/9516f/code-signing-xcode.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 99.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAAC6ElEQVQ4y42U204aYRDHeQdvEHaXPYCLgGHFUyKSNMZDOXhAiYhIwWiRemVi0kavTGyjXjZpL9obvesr0AuTNmmiSS/6An2DPsS/+U/ZFaqkvZidne+b+c3MN9+uT1EUhMNhmKYpYlmW9y5C2zBgUDr7/UTXdfj4oMGAbpDRgZiaKlDbjiIRiwnc/DtpR1iYLxQKPQpkkKEEEG69Ruz6B1JvPyNdrCPpjMEw9AfVud35NE3rAbqtCTSkwjr/CqcNPP34HdFXnxCefAJDDUrCblBfoEA7WtdUxF9+Qeb9L0xW38A5/wnTycDQ7oH/rPBeLBiqH3blGvHyB8RK7xB78Q1mJAZTD/X4/gfQEKBM1wzDtGwY9hh004ZphP7sPTKUHqC0qOtQVVXg1LS5ryoKdE2BZRnemiu03WsnQE6ZgKGhIezs7GB3dxd7e3uoVqvY3NzE82ZT1mq1Z8jmcmi1Wjg4OECj0cD+/r74JRIJYXjXhnQCJyYmMDo6imQyCcdxRKdSKYyPj4seHh4WTR9q+tPn0Qqj0SgKhQLy+TzW19exurqKlZUVzM7OYnl5GWtra1hcXMT8/LzoUqkkUi6XBUyOVNh9hnTc2toSEAMJct+7bSbb2Njw7JGREe8sBciXXC4njqxuYWFBKi0Wi5ibm5M9N5HbAWFcY5UshAxvypFIRBzpwMyuE4EMZrtMls1mJRkTEF6pVJDPF8QnHo9Ll94ZTk1NyQaBBC0tLUkAz4g2E9AmiNUxAcFMnslken8O7p/Ftm0RTpyaWd01tsPBsRsGUtOPa+7dlJb5P+Q1YMtsqbsC2pz89PS0rJ2enuLk5ETk6OhI9PHxMc7OzqQTQn2BQEBK5oVtNpsSdHFxgcvLSxweHso64Qy8vb3Fzc0N2u02rq6uRNO+u7sTKIuTobC1mZkZpNPpB8Jk7IC6Xq/Ll7G9vY1arSaaNr8w3lcem8/v98t3Ozg42FeCwSDoNzAw0Ffoxwp/A28Vmk6wVjQJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Xcode-Warning&quot;
        title=&quot;Xcode-Warning&quot;
        src=&quot;/static/53a00bad8a4ca703c24d68a92aa6f4fc/9516f/code-signing-xcode.png&quot;
        srcset=&quot;/static/53a00bad8a4ca703c24d68a92aa6f4fc/c26ae/code-signing-xcode.png 158w,
/static/53a00bad8a4ca703c24d68a92aa6f4fc/6bdcf/code-signing-xcode.png 315w,
/static/53a00bad8a4ca703c24d68a92aa6f4fc/9516f/code-signing-xcode.png 538w&quot;
        sizes=&quot;(max-width: 538px) 100vw, 538px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;개발 중인 앱을 실제 기기에서 실행시킬 때 위의 문구를 보았을 것이다. 문구에 따르면 서명이 유효하지 않거나, 불충분한 entitlement 또는 프로파일이 사용자로부터 신뢰받지 못한 경우 앱을 실행할 수 없다고 한다.&lt;/p&gt;
&lt;p&gt;&lt;small style=&quot;color: gray;&quot;&gt;*Xcode 가 자동으로 생성해준 Certificate 를 사용함에도 위의 경고가 뜨는 이유는 주로 앱의 Provisioning profile 이 애플 개발자 포털에 등록되어 있지 않기 때문이다.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;코드 서명은 설치된 앱을 실행하거나 앱스토어에 제출할 때 디바이스나 애플에 의해 확인된다.&lt;/p&gt;
&lt;p&gt;앱 서명은 어떤 과정과 방법으로 이루어질까?&lt;/p&gt;
&lt;h2&gt;Signing Certificate&lt;/h2&gt;
&lt;p&gt;앱 서명은 Certificate 라는 인증서를 발급받아 사용하는 것으로 할 수 있다. Certificate 에는 디지털 서명뿐만아니라 발급 신청자와 발급한 기관에 대한 정보도 담겨있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;계약서에 서명만 하면 됐지 다른건 왜 필요하지? 라는 의문이 들 수 있다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;다시 현실 세계로 돌아와 계약서를 떠올려보자. 계약서에 서명한 당사자가 본인이라면 문제가 없을 것이다. 그러나 이점을 악용하여 서명을 위조하는 경우도 존재한다. 실제로 계약 절차에는 서명 하는 사람의 본인 인증을 위해 주민등록증을 제시하고 사본을 복사하는 과정을 거친다. 주민등록증도 공문서의 일종으로 정부가 발급하기에 우리는 신분 확인에 제시되는 주민등록증을 신뢰할 수 있다.&lt;/p&gt;
&lt;p&gt;특히나 디지털 세계에서는 얼굴을 맞대고 서명하는 것이 아니기 때문에 서명을 하는 사람에 대한 정보가 필요하고 해당 정보를 인증해줄 권위 있는 기관이 필요한 것이다. 쉽게 말해 디지털 신분증을 발급 받아야하는 것이다.&lt;/p&gt;
&lt;p&gt;다행히도 애플이 서명이 포함된 디지털 신분증(Certificate)을 발급해주는 기관의 역할도 겸하고 있다. 이러한 기관을 CA(Certificate Authority) 라고 한다.&lt;/p&gt;
&lt;p&gt;Certificate 내용에는 몇 가지 정보가 담겨있다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;발급을 요청한 사람/기관&lt;/li&gt;
&lt;li&gt;인증서 발급 기관&lt;/li&gt;
&lt;li&gt;인증서 만료일&lt;/li&gt;
&lt;li&gt;서명&lt;/li&gt;
&lt;li&gt;인증서 사용 목적&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d699fbbfc1aa48fff147043bd28ede75/6af66/signature.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 92.40506329113923%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACD0lEQVQ4y42UV27DQAxEfQr33nvvBTbc4X7/yzB4A6wgGUqQD0LSSjt85HAVSafTNhqNbLvd2mAwsH6/b5PJxKrVqkWjUUskEop4PK5IJpOKWCwWuh5JpVLW6/VsPp/b7Xazx+Nhz+fThsOhNZtN63Q61m63rdvt6rtarWaNRkMQvHMQ9XpdEBEIISkUChK8XC52Op0ksNlsbLVaSQhqkrARIZ75ZjweS5wkhARB5YPr9Sqxw+GgTVCzns1mLZPJWC6Xs2KxaPl8XmvuSrCukp1gqVQS3X6/l6CjgnK324kCmuVyabPZTMkI7heLhSpBQ4L0kewI3e93kdKb9XqtBJD4G/9boCNTKIc+QnE8HiWCERBBiDC9YxMAf4UIsZ8N5/NZlO/3W85RBoKUQp9I/i9BPsTlVqtllUpF/aPJCJXLZSV0JbkIK9czxWWGkJIxwZUMJSUzMjxjhDMBg6iANd6xHhCkbAYXSugYckziSjLmlLH6fD6aCJJzCLjyzPuIE+PqjhnBGhmn06nGB8Og5J41xoXgHjqqoLIAIW7/1fAwU/x99cYmjNDfeGbQv+buAfgOj5AHSsIMAncZHc4rBlAy95RMK/xzGSD0o7OBBtN4zjJCJGGcEODEYBp/IUwLa4FXMtmgZLBfr5eOHk13/0ZEIUeUf+E3XWCw/ZQIQYgADjJrzBk/YK78ovxi34Q/H0oT0MdWdSoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;signature&quot;
        title=&quot;signature&quot;
        src=&quot;/static/d699fbbfc1aa48fff147043bd28ede75/f058b/signature.png&quot;
        srcset=&quot;/static/d699fbbfc1aa48fff147043bd28ede75/c26ae/signature.png 158w,
/static/d699fbbfc1aa48fff147043bd28ede75/6bdcf/signature.png 315w,
/static/d699fbbfc1aa48fff147043bd28ede75/f058b/signature.png 630w,
/static/d699fbbfc1aa48fff147043bd28ede75/6af66/signature.png 640w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;인증서의 &lt;code class=&quot;language-text&quot;&gt;Public Key Info&lt;/code&gt; 부분에는 서명에 사용된 알고리즘에 대한 정보와 서명에 대한 정보를 확인할 수 있다.
또한 이미지 하단 &lt;code class=&quot;language-text&quot;&gt;Usage&lt;/code&gt; 부분에 Public key 를 디지털 서명에 사용할 수 있다고 용도가 표시되어있다. &lt;small style=&quot;color: gray;&quot;&gt;*인증서 정보는 Mac 에 설치된 &lt;code class=&quot;language-text&quot;&gt;Keychain Access&lt;/code&gt; 앱을 통해 쉽게 확인할 수 있다.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;Certificate 발급은 &lt;code class=&quot;language-text&quot;&gt;Keychain Access&lt;/code&gt; 을 통해 만든 CSR(Certificate Signature Request) 을 애플 개발자 포털에 업로드하여 발급 받을 수 있다. &lt;small style=&quot;color: gray;&quot;&gt;*애플 개발자 프로그램에 가입되어있어야 한다. 자세한 과정은 다음에 다뤄보기로 하겠다.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;애플을 통해 Certificate 를 발급 받았다면 사실상 Code Signing 에 필요한 서명은 준비가 된 것이다.&lt;/p&gt;
&lt;h2&gt;App ID&lt;/h2&gt;
&lt;p&gt;앱 서명이 준비되었다면 서명할 앱에 대한 정보를 애플의 개발자 포털에서 등록해야한다.&lt;/p&gt;
&lt;p&gt;앱을 등록하는 과정에서 해당 앱이 사용하는 다른 앱 서비스&lt;small style=&quot;color: gray;&quot;&gt;*MusicKit, ShazamKit&lt;/small&gt;와 애플에서 제공하는 기능&lt;small style=&quot;color: gray;&quot;&gt;*애플 페이, iCloud, Maps, Push Notification 등&lt;/small&gt; 에 대한 정보도 함께 등록해야한다.&lt;/p&gt;
&lt;p&gt;다른 서비스에 대한 정보(Entitlement)를 포함 시켜야하는 이유는 해당 기능들은 다른 앱과 데이터를 공유하고 상호작용하기 때문에 &lt;code class=&quot;language-text&quot;&gt;Code Signing&lt;/code&gt; 프로세스와 통합되어있다. 악의적인 목적을 가진 앱으로부터 민감한 정보가 노출될 가능성을 보호하기 위한 조치이다.&lt;/p&gt;
&lt;p&gt;예를 들어, 앱이 애플 페이를 사용하고 있음에도 해당 정보를 등록하지 않으면 앱스토어 심사에 걸려 등록되지 않는다.&lt;/p&gt;
&lt;h2&gt;Provisioning Profile&lt;/h2&gt;
&lt;p&gt;Certificate 와 앱 등록을 마쳤다면 Provisioning Profile 을 만들 수 있다. Profile 에는 &lt;strong&gt;App ID&lt;/strong&gt;, &lt;strong&gt;Certificate&lt;/strong&gt;, 앱의 실행이 허용된 &lt;strong&gt;Device&lt;/strong&gt;에 대한 정보와 앱이 사용하는 &lt;strong&gt;Entitlement&lt;/strong&gt; 가 나열되어있다. 앱에 대한 신상명세서라고 볼 수 있다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;App ID&lt;/li&gt;
&lt;li&gt;Certificate&lt;/li&gt;
&lt;li&gt;Device&lt;/li&gt;
&lt;li&gt;Entitlement&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/43045aceb7db52bb2b4ac3de0c8dd6b9/8b640/profile.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 61.39240506329114%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABOElEQVQoz4VTy26DMBDkX3NL+zW99p8ilEgcOeMoEW8MBu9Us8Kpk0C70sjr1zDjXZI8z3E6nZBlmSJNU52fz2dcLhede+/BEJGncSuScRwxTZMe4sUA5xzmecayLDrnfgzuhXsxkqZpUFUVhmGAtRZ93yuCqqAoBoNny7J820/qusb1elUSqiUxQWVb9mLC2+329AxK2LatzPPM1TfIelp+40FAu0VRgA5jN6qwbdtdazFRvE43dEYYY9QV351v6I0xi3OOHhcR0XFF+HRQ/SCkKqokCcGcYJW/i6I4WGs/ABy990cR+QRwEJGvVZW8Kt1tGwA9gApAvY6ae+8rEen2CF/bLCBhpe73u8rtuk7BPLK3L2dLYdM0YowRVttaK8MwiHNOouLuKtyCNjYbNC79f7/XXwp/AFraqcuFVPo8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;profile&quot;
        title=&quot;profile&quot;
        src=&quot;/static/43045aceb7db52bb2b4ac3de0c8dd6b9/f058b/profile.png&quot;
        srcset=&quot;/static/43045aceb7db52bb2b4ac3de0c8dd6b9/c26ae/profile.png 158w,
/static/43045aceb7db52bb2b4ac3de0c8dd6b9/6bdcf/profile.png 315w,
/static/43045aceb7db52bb2b4ac3de0c8dd6b9/f058b/profile.png 630w,
/static/43045aceb7db52bb2b4ac3de0c8dd6b9/40601/profile.png 945w,
/static/43045aceb7db52bb2b4ac3de0c8dd6b9/78612/profile.png 1260w,
/static/43045aceb7db52bb2b4ac3de0c8dd6b9/8b640/profile.png 1454w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Xcode 를 통해 Provisioning Profile 을 등록하고 기기에 앱을 테스트하면 위에서 보았던 경고창은 더이상 나타나지 않을 것이다. 아카이브에 필요한 Code Signing 도 모두 준비된 셈이다.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;Code Signing 은 다음 4 가지 사항을 모두 포함한다.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;앱이 변조되지 않았음을 증명하기 위한 서명을 포함한다.&lt;/li&gt;
&lt;li&gt;서명에는 Certificate 가 사용되고 Certificate 는 애플로부터 발급받는다.&lt;/li&gt;
&lt;li&gt;애플 개발자 포털에 앱을 등록하고 Entitlement 에 대한 정보도 포함시켜야한다.&lt;/li&gt;
&lt;li&gt;Provisioning Profile 에는 App ID, Certificate, 앱을 실행시킬 수 있는 Device 목록, Entitlement 정보가 포함된다.&lt;/li&gt;
&lt;/ol&gt;
&lt;h3&gt;참고자료&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/support/code-signing/&quot;&gt;Apple Official Document&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://michiganlabs.com/news/ios-code-signing&quot;&gt;The Basic of iOS Code Signing&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://medium.com/ios-os-x-development/ios-code-signing-provisioning-in-a-nutshell-d5b247760bef&quot;&gt;iOS Code Signing &amp;#x26; Provisioning in a Nutshell&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://youtu.be/0lJvQ-442OY&quot;&gt;Overview of iOS app signing&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://youtu.be/H6lpFRpyl14&quot;&gt;HTTPS 가 뭐고 왜 쓰나요?&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[[Swift] Opaque Type 이란?]]></title><description><![CDATA[SwiftUI 를 살펴보던 중 처음 보는 키워드를 발견하게 되었다. 오늘의 주인공인  이 무엇인지 살펴보고자 한다. Swift 공식 문서에 따르면  은  이라는 문법으로 소개되어 있다. A function or method with an opaque…]]></description><link>https://gatsbystarterblogsource.gatsbyjs.io/opaque-type/</link><guid isPermaLink="false">https://gatsbystarterblogsource.gatsbyjs.io/opaque-type/</guid><pubDate>Sun, 08 May 2022 22:40:32 GMT</pubDate><content:encoded>&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;SwiftUI&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ContentView&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; body&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;View&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Some??&lt;/span&gt;
      &lt;span class=&quot;token class-name&quot;&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string-literal&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Hello World!&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;SwiftUI 를 살펴보던 중 처음 보는 키워드를 발견하게 되었다. 오늘의 주인공인 &lt;code class=&quot;language-text&quot;&gt;some&lt;/code&gt; 이 무엇인지 살펴보고자 한다.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.swift.org/swift-book/LanguageGuide/OpaqueTypes.html&quot;&gt;Swift 공식 문서&lt;/a&gt;에 따르면 &lt;code class=&quot;language-text&quot;&gt;some&lt;/code&gt; 은 &lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 이라는 문법으로 소개되어 있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A function or method with an opaque return type hides its return value’s type information.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;머릿말을 해석해보자면 &lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 을 반환 타입(return type)으로 사용하는 함수 또는 메소드는 반환 값의 타입 정보를 감출 수 있다고 쓰여있다.&lt;/p&gt;
&lt;p&gt;설명하기에 앞서 문제 상황을 하나 만나보자.&lt;/p&gt;
&lt;h3&gt;베이스 코드&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Equatable&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.0&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.0&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; point1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; point2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;point1 &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; point2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;예제로 사용할 베이스 코드다. &lt;code class=&quot;language-text&quot;&gt;Point&lt;/code&gt;를 생성해 반환하는 &lt;code class=&quot;language-text&quot;&gt;createPoint&lt;/code&gt; 함수를 만들었다. 이 함수의 헤더 부분을 보면 알 수 있듯이 반환 타입은 &lt;code class=&quot;language-text&quot;&gt;Point&lt;/code&gt; 로 구체 타입을 반환하도록 명시되어 있다.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Equable&lt;/code&gt; 프로토콜을 채택하고 있어 &lt;code class=&quot;language-text&quot;&gt;point1&lt;/code&gt; 과 &lt;code class=&quot;language-text&quot;&gt;point2&lt;/code&gt; 는 비교 연산을 할 수 있다.&lt;/p&gt;
&lt;h3&gt;코드 확장&lt;/h3&gt;
&lt;p&gt;만약 다른 종류의 Point 를 만드는 경우가 생긴다면 어떻게 해야할까? 예를 들어, 3차원 좌표를 표현하는 좌표를 추가하고 싶은 경우를 생각해볼 수 있다. 프로토콜을 이용해 추상화해보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Equatable&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;extension&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreeDimensionalPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.0&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0.0&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Equatable&lt;/code&gt; 를 채택한 &lt;code class=&quot;language-text&quot;&gt;EquatablePoint&lt;/code&gt; 프로토콜을 만들어 한 단계 추상화했고 &lt;code class=&quot;language-text&quot;&gt;Point&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;ThreeDimensionalPoint&lt;/code&gt; 모두 같은 프로토콜을 채택한다. 새로 만든 구조체는 3차원 좌표 표현을 위해 &lt;code class=&quot;language-text&quot;&gt;z&lt;/code&gt; 속성이 추가되었다.&lt;/p&gt;
&lt;p&gt;아, 마지막으로 이제 두 종류의 좌표가 생겼으니 팩토리를 만들어 좌표를 쉽게 만들어보자.&lt;/p&gt;
&lt;h3&gt;문제 상황&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PointFactory&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token nil constant&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/* 🚨 ERROR!
      Protocol &apos;EquatablePoint&apos; can only be used as a generic constraint
      because it has Self or associated type requirements
    */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; z &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; z &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreeDimensionalPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;문제가 생겼다. &lt;code class=&quot;language-text&quot;&gt;Equatable&lt;/code&gt; 프로토콜은 &lt;code class=&quot;language-text&quot;&gt;Self&lt;/code&gt; 를 사용해 &lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt; 메소드의 매개변수 타입을 추론하기 때문에 프로토콜만으로는 해당 타입이 무엇인지 추론할 수 없어 리턴 타입으로 사용할 수 없다는 에러가 발생한다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/68526a852cffc3e67a2fdae410dde3a3/6569d/equatable.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 15.822784810126581%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAnUlEQVQI102MwW7CMBAF8zVtKEkce53NmtiOIOWA4P9/Z1AjRDmMNO8wr3nMV266sYVK1o1a7qzlQbJfOhf5bocP+hf/+6vtaQ/u7c3xxzM74yIr6hJFKkso2HjCxkTvIhITIongTwS/EIIRxHafYuXYeSRkohSawSs2GNd43o+LX8jj8vKMG5VZM7P+xeseTTG9t06VbhBMz5heeAJhY2CiDECiWQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Chinese Salty Egg&quot;
        title=&quot;Chinese Salty Egg&quot;
        src=&quot;/static/68526a852cffc3e67a2fdae410dde3a3/f058b/equatable.png&quot;
        srcset=&quot;/static/68526a852cffc3e67a2fdae410dde3a3/c26ae/equatable.png 158w,
/static/68526a852cffc3e67a2fdae410dde3a3/6bdcf/equatable.png 315w,
/static/68526a852cffc3e67a2fdae410dde3a3/f058b/equatable.png 630w,
/static/68526a852cffc3e67a2fdae410dde3a3/40601/equatable.png 945w,
/static/68526a852cffc3e67a2fdae410dde3a3/78612/equatable.png 1260w,
/static/68526a852cffc3e67a2fdae410dde3a3/6569d/equatable.png 1328w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;따라서 프로토콜이 &lt;code class=&quot;language-text&quot;&gt;associated type&lt;/code&gt; 을 가지거나 정의된 메소드의 매개변수, 리턴 타입으로 &lt;code class=&quot;language-text&quot;&gt;Self&lt;/code&gt; 가 사용되면 위의 에러가 발생한다. 에러가 발생했으니 &lt;code class=&quot;language-text&quot;&gt;Point&lt;/code&gt;와 &lt;code class=&quot;language-text&quot;&gt;ThreeDimensionalPoint&lt;/code&gt;를 생성하는 메소드를 각각 만들고 리턴 타입을 구체 타입으로 지정하는 것이 유일한 해결방법일까?&lt;/p&gt;
&lt;p&gt;아니다. 우리에겐 구원투수가 남아있다.&lt;/p&gt;
&lt;h3&gt;Opaque Type comes into play&lt;/h3&gt;
&lt;p&gt;이 글의 머릿말에서 &lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 을 반환 타입(return type)으로 사용하는 함수 또는 메소드는 반환 값의 타입 정보를 감출 수 있다고 언급했다.&lt;/p&gt;
&lt;p&gt;여기서 타입 정보를 감춘다는 의미는 본래 구체타입 정보는 그대로 보존한 상태로 외부에는 자신의 타입을 프로토콜로 노출 시킬 수 있다는 의미다. 코드로 살펴보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;리턴 타입 앞에 &lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 을 의미하는 &lt;code class=&quot;language-text&quot;&gt;some&lt;/code&gt; 을 붙였다. 좀 전에 보았던 에러가 보이지 않은 것을 확인할 수 있다.&lt;/p&gt;
&lt;p&gt;앞전에 &lt;code class=&quot;language-text&quot;&gt;Equatable&lt;/code&gt; 프로토콜은 &lt;code class=&quot;language-text&quot;&gt;Self&lt;/code&gt; 를 사용해 &lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt; 메소드의 매개변수 타입을 추론하기 때문에 프로토콜만으로는 해당 타입이 무엇인지 추론할 수 없어 리턴 타입으로 사용할 수 없다고 말했다. 그렇다면 지금은 왜 문제가 없다고 하는 걸까?&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 를 사용하면 &lt;code class=&quot;language-text&quot;&gt;createPoint&lt;/code&gt; 함수의 리턴 값은 사용자인 개발자에게 &lt;code class=&quot;language-text&quot;&gt;EquatablePoint&lt;/code&gt; 로 노출된다. 그러나 컴파일러는 실제 리턴 값이 &lt;code class=&quot;language-text&quot;&gt;Point&lt;/code&gt; 구조체인 것을 알고 있다. 때문에 &lt;code class=&quot;language-text&quot;&gt;Equatable&lt;/code&gt; 프로토콜의 &lt;code class=&quot;language-text&quot;&gt;Self&lt;/code&gt; 가 &lt;code class=&quot;language-text&quot;&gt;Point&lt;/code&gt; 임을 알고 있다는 뜻이다.&lt;/p&gt;
&lt;p&gt;무언가를 감춘다는 의미는 감추는 누군가는 감춘 것이 무엇인지 알고 있다는 의미도 내포한다. 여기서 타입 정보를 감추는 컴파일러는 실제 타입 정보를 알고 있고 컴파일러가 감춘 타입은 개발자는 볼 수 없다.&lt;/p&gt;
&lt;p&gt;실제 함수를 테스트해보면 아래와 같다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; point1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; point2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; point3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;point1 &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; point2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;point2 &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; point3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;ins&gt;&lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 의 장점은 &lt;code class=&quot;language-text&quot;&gt;Self&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;associated type&lt;/code&gt; 을 사용하는 프로토콜을 리턴 타입으로 사용할 수 있게 해준다. 이것의 의미는 해당 프로토콜의 기능을 그대로 사용할 수 있다는 의미다.&lt;/ins&gt;&lt;/p&gt;
&lt;p&gt;팩토리를 수정해보자.&lt;/p&gt;
&lt;h3&gt;문제 상황.2&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PointFactory&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token nil constant&quot;&gt;nil&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/* 🚨 ERROR!
      Function declares an opaque return type,
      but the return statements in its body do not have matching underlying types
    */&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; z &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; z &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreeDimensionalPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;createPoint&lt;/code&gt; 함수의 경우처럼 &lt;code class=&quot;language-text&quot;&gt;some&lt;/code&gt; 추가했는데 에러가 발생했다. 다시 한번 잘 생각해보자.&lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 은 타입 정보를 감출 뿐이지 타입 정보는 그대로 유지시키는 타입이다. 따라서 현재 &lt;code class=&quot;language-text&quot;&gt;createPoint&lt;/code&gt; 메소드는 두 가지 타입을 리턴하는 함수라고 볼 수 있다. Swift 는 강타입 언어이다. 때문에 하나의 함수가 여러 종류의 타입을 리턴할 수 없다. 오직 하나의 타입을 리턴 타입으로 지정할 수 있다.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;enum&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PointFactory&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Point&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Double&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;EquatablePoint&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThreeDimensionalPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;함수의 &lt;code class=&quot;language-text&quot;&gt;Overloading&lt;/code&gt; 을 사용해 각각 한 가지 타입을 리턴하는 함수로 분리했다. 비교 연산을 해보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;
&lt;span class=&quot;token comment&quot;&gt;// 아래 싱수의 타입은 모두 some EquatablePoint 이다.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; threeDimensionalPoint1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PointFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; threeDimensionalPoint2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PointFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; threeDimensionalPoint3 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PointFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createPoint&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; y&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; z&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;threeDimensionalPoint1 &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; threeDimensionalPoint2&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;threeDimensionalPoint2 &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; threeDimensionalPoint3&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// false&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Point&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// ThreeDimensionalPoint&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;Self&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Bool&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;y &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; lhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z &lt;span class=&quot;token operator&quot;&gt;==&lt;/span&gt; rhs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;z
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;이번에는 &lt;code class=&quot;language-text&quot;&gt;ThreeDimensionalPoint&lt;/code&gt; 를 만들어 비교 연산을 해보았다. 그런데 &lt;code class=&quot;language-text&quot;&gt;Point&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;ThreeDimensionalPoint&lt;/code&gt; 구조체 모두 다른 방식으로 &lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt; 메소드를 구현했다는 사실을 기억해주길 바란다. 서로 다른 구현을 가지고 있지만 컴파일러는 &lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 아래 감춰진 구체 타입 정보를 알고 있다. 때문에 감추어진 타입이 가진 메소드를 호출한다.&lt;/p&gt;
&lt;p&gt;따라서 &lt;code class=&quot;language-text&quot;&gt;ThreeDimensionalPoint&lt;/code&gt; 에서 구현된 &lt;code class=&quot;language-text&quot;&gt;==&lt;/code&gt; 메소드를 호출한다.&lt;/p&gt;
&lt;h3&gt;이게 전부인가?&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 을 사용하면 제한 되었던 프로토콜의 기능을 사용할 수 있다는 장점이 있다는 건 이해했을 것이다. 그럼 &lt;ins&gt;&lt;code class=&quot;language-text&quot;&gt;Self&lt;/code&gt; 나 &lt;code class=&quot;language-text&quot;&gt;associated type&lt;/code&gt; 을 사용하지 않는 프로토콜만 사용할 경우에는 굳이 사용할 필요가 있을까?&lt;/ins&gt;&lt;/p&gt;
&lt;p&gt;아니다. &lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 의 가장 큰 장점을 소개하겠다.&lt;/p&gt;
&lt;h3&gt;Transformation&lt;/h3&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 을 사용하면 구체 타입은 그대로 보존된다는 사실을 기억해주길 바란다.&lt;/p&gt;
&lt;p&gt;여기서 구체 타입이란 결국 특정 프로토콜을 채택한 타입을 의미한다. 그렇다면 특정 프로토콜을 채택한 타입을 인자로 하는 함수에 전달할 수 있다는 것을 의미한다.&lt;/p&gt;
&lt;p&gt;&lt;ins&gt;&lt;strong&gt;&lt;em&gt;함수의 매개변수 타입을 특정 프로토콜을 채택한 타입으로 지정하는 것과 프로토콜로 지정하는 것에는 큰 차이가 있다.&lt;/em&gt;&lt;/strong&gt;&lt;/ins&gt;&lt;/p&gt;
&lt;p&gt;코드를 살펴보자.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;protocol&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Triangle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string-literal&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;&quot;&quot;
           *
           **
           ***
           &quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FlippedShape&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; shape&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; lines &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; shape&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;separator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string-literal&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; lines&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reversed&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;joined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;separator&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string-literal&quot;&gt;&lt;span class=&quot;token string&quot;&gt;&quot;\n&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; triangle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Triangle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Type is Triangle&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; flippedShape &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FlippedShape&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; triangle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Type is FlippedShape&amp;lt;Triangle&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Triangle&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;FlippedShape&lt;/code&gt; 모두 Shape 프로토콜을 채택하고 있다.&lt;/p&gt;
&lt;h3&gt;Case.1 매개변수의 타입이 프로토콜인 경우&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;flip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token omit keyword&quot;&gt;_&lt;/span&gt; shape&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/* 🚨 ERROR!
   Protocol &apos;Shape&apos; as a type cannot conform to the protocol itself
  */&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FlippedShape&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; shape&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; triangle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Triangle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; flippedTriangle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;flip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;triangle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 🚨 ERROR!&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;에러 메시지에 &lt;code class=&quot;language-text&quot;&gt;Shape as a type&lt;/code&gt; 라고 언급된 것처럼 매개변수 shape 은 &lt;code class=&quot;language-text&quot;&gt;Shape&lt;/code&gt; 프로토콜을 채택한 타입을 의미하지 않는다. 즉, Shape 이라는 프로토콜 타입을 매개변수의 타입으로 정했다는 것이다.&lt;/p&gt;
&lt;p&gt;&lt;small style=&quot;color: gray;&quot;&gt;매개변수의 타입을 Int, String, Bool 로 지정하는 것처럼 프로토콜이라는 타입으로 지정했을 뿐이다.&lt;/small&gt;&lt;/p&gt;
&lt;p&gt;반면, FlippedShape 구조체의 매개변수는 Shape 프로토콜을 채택한 타입을 매개변수 타입으로 하기 때문에 두 타입이 같지 않다.&lt;/p&gt;
&lt;h3&gt;Case.2 매개변수의 타입이 제너릭인 경우&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;swift&quot;&gt;&lt;pre class=&quot;language-swift&quot;&gt;&lt;code class=&quot;language-swift&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;token function-definition function&quot;&gt;flip&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token omit keyword&quot;&gt;_&lt;/span&gt; shape&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;T&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;some&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Shape&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FlippedShape&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;shape&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; shape&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; triangle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Triangle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; flippedTriangle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;flip&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;triangle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// ✅&lt;/span&gt;
flippedTriangle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;draw&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// ***&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// **&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// *&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;제너릭을 사용하면 매개변수의 타입을 프로토콜을 채택한 타입으로 정의할 수 있다.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 은 함수와 메소드 리턴 값의 타입 정보를 감추지만 본래의 타입 정보를 보존한다.
&lt;ul&gt;
&lt;li&gt;클라이언트는 감춰진 타입 정보에 접근할 수 없지만 컴파일러는 접근할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.swift.org/swift-book/LanguageGuide/OpaqueTypes.html#ID614&quot;&gt;구체 타입이 보존되어있기 때문에 &lt;code class=&quot;language-text&quot;&gt;Self&lt;/code&gt;, &lt;code class=&quot;language-text&quot;&gt;associated type&lt;/code&gt; 을 사용하는 프로토콜도 리턴 타입으로 사용할 수 있다.&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;2 의 경우 타입캐스팅을 하지 않고 해당 프로토콜의 기능을 그대로 사용할 수 있다.&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.swift.org/swift-book/LanguageGuide/OpaqueTypes.html#ID615&quot;&gt;함수의 매개변수 타입이 특정 프로토콜을 채택한 타입인 경우 &lt;code class=&quot;language-text&quot;&gt;Opaque Type&lt;/code&gt; 을 인자로 전달할 수 있다.&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;반면, 전달하고자하는 인자의 타입이 프로토콜인 경우에는 전달할 수 없다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Todo.&lt;/p&gt;
&lt;p&gt;Type Erasure 내용 추가할 것&lt;/p&gt;</content:encoded></item></channel></rss>